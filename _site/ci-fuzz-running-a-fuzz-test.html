<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Running a Fuzz Test - Code Intelligence Docs</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Running a Fuzz Test | Code Intelligence Docs</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Running a Fuzz Test" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation site for Code Intelligence products." /> <meta property="og:description" content="Documentation site for Code Intelligence products." /> <link rel="canonical" href="http://localhost:4000/ci-fuzz-running-a-fuzz-test" /> <meta property="og:url" content="http://localhost:4000/ci-fuzz-running-a-fuzz-test" /> <meta property="og:site_name" content="Code Intelligence Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Running a Fuzz Test" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Documentation site for Code Intelligence products.","headline":"Running a Fuzz Test","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/ci_logo.png"}},"url":"http://localhost:4000/ci-fuzz-running-a-fuzz-test"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/cifuzz-cli" class="nav-list-link">CI Fuzz CLI</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/cli-installation" class="nav-list-link">Installation</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-quick-start-cpp" class="nav-list-link">Quick Start C/C++</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-quick-start-java" class="nav-list-link">Quick Start Java</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-initializing-a-project" class="nav-list-link">Initializing a Project</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-creating-a-fuzz-test" class="nav-list-link">Creating a Fuzz Test</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-running-a-fuzz-test" class="nav-list-link">Running a Fuzz Test</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-findings" class="nav-list-link">Findings</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-coverage" class="nav-list-link">Coverage</a></li><li class="nav-list-item "><a href="http://localhost:4000/cli-remote-run" class="nav-list-link">Remote Run</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/ci-fuzz" class="nav-list-link">CI Fuzz</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-quick-start-cpp" class="nav-list-link">Quick Start C/C++</a></li><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-installation" class="nav-list-link">Installation</a></li><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-authentication" class="nav-list-link">Authentication</a></li><li class="nav-list-item active"><a href="http://localhost:4000/ci-fuzz-running-a-fuzz-test" class="nav-list-link active">Running a Fuzz Test</a></li><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-access-control" class="nav-list-link">Access Control</a></li><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-project-creation" class="nav-list-link">Project Creation</a></li><li class="nav-list-item "><a href="http://localhost:4000/ci-fuzz-findings" class="nav-list-link">Findings</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/web-api-fuzzing" class="nav-list-link">Web API Fuzzing</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/java-web-api-fuzzing" class="nav-list-link">Java Web API Fuzzing</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/go-web-api-fuzzing" class="nav-list-link">Go Web API Fuzzing</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/cpp-web-api-fuzzing" class="nav-list-link">CPP Web API Fuzzing</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Code Intelligence Docs" aria-label="Search Code Intelligence Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/CodeIntelligenceTesting/cifuzz" class="site-button" target="_blank" rel="noopener noreferrer" > CI Fuzz CLI </a> </li> <li class="aux-nav-list-item"> <a href="//code-intelligence.com" class="site-button" target="_blank" rel="noopener noreferrer" > Code Intelligence </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/ci-fuzz">CI Fuzz</a></li> <li class="breadcrumb-nav-list-item"><span>Running a Fuzz Test</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="running-a-fuzz-test-with-ci-fuzz"> <a href="#running-a-fuzz-test-with-ci-fuzz" class="anchor-heading" aria-labelledby="running-a-fuzz-test-with-ci-fuzz"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Running a Fuzz Test with CI Fuzz</strong> </h1> <p>This page describes how to run a fuzz test on CI Fuzz, both manually and as part of a CI/CD pipeline.</p> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ul id="markdown-toc"> <li><a href="#create-a-bundle-with-ci-fuzz-cli" id="markdown-toc-create-a-bundle-with-ci-fuzz-cli">Create a Bundle with CI Fuzz CLI</a> <ul> <li><a href="#drag-and-drop-bundle" id="markdown-toc-drag-and-drop-bundle">Drag and Drop Bundle</a></li> <li><a href="#import-and-start-with-cictl" id="markdown-toc-import-and-start-with-cictl">Import and Start with cictl</a></li> </ul> </li> <li><a href="#ci-fuzz-cli-remote-run" id="markdown-toc-ci-fuzz-cli-remote-run">CI Fuzz CLI Remote Run</a></li> <li><a href="#running-fuzz-tests-with-cicd" id="markdown-toc-running-fuzz-tests-with-cicd">Running Fuzz Tests with CI/CD</a></li> </ul><hr /> <h2 id="create-a-bundle-with-ci-fuzz-cli"> <a href="#create-a-bundle-with-ci-fuzz-cli" class="anchor-heading" aria-labelledby="create-a-bundle-with-ci-fuzz-cli"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a Bundle with CI Fuzz CLI </h2> <p>If you’re project is already configured with CI Fuzz CLI, you can create a bundle by running the following command from the root of the project directory:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cifuzz bundle
</code></pre></div></div> <ul> <li>This command will build and bundle the runtime artifacts needed to run your fuzz test(s) on a CI Fuzz server</li> <li>You can specify the name of one or more fuzz tests or don’t specify any to build all the fuzz tests for a project</li> <li>You can specify various arguments that will tell CI Fuzz how to run your fuzz tests. See <a href="/cli-remote-run">this page</a> for additional details.</li> <li>The output is a tarball of the form <code class="language-plaintext highlighter-rouge">fuzz_tests.tar.gz</code> or <code class="language-plaintext highlighter-rouge">&lt;name_of_specific_fuzz_test&gt;.tar.gz</code> if you specified one.</li> </ul> <h3 id="drag-and-drop-bundle"> <a href="#drag-and-drop-bundle" class="anchor-heading" aria-labelledby="drag-and-drop-bundle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Drag and Drop Bundle </h3> <p>Once you have created your bundle, you can drag and drop it in the Web UI on the project card you want to run it under. You can either do this from the <strong>Dashboard</strong> or from the <strong>Overview</strong> after selecting your project.</p> <h3 id="import-and-start-with-cictl"> <a href="#import-and-start-with-cictl" class="anchor-heading" aria-labelledby="import-and-start-with-cictl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Import and Start with cictl </h3> <p>Once you have created a bundle, you can also use the <code class="language-plaintext highlighter-rouge">cictl</code> command (located in <code class="language-plaintext highlighter-rouge">ci-fuzz-install-directory/bin/cictl</code>) to upload the bundle to the CI Fuzz server and then start it. Here are the <code class="language-plaintext highlighter-rouge">cictl</code> commands you can use to accomplish this</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">FUZZING_SERVER</span><span class="o">=</span><span class="s2">"&lt;address of fuzzing server&gt;"</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">"&lt;project name&gt;"</span>
<span class="nv">CICTL_CMD</span><span class="o">=</span><span class="s2">"cictl -s </span><span class="nv">$FUZZING_SERVER</span><span class="s2">"</span>
<span class="nv">ARTIFACT_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nv">$CICTL_CMD</span> import artifact fuzz_tests.tar.gz <span class="nt">--project-name</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span><span class="si">)</span>
<span class="nv">$CICTL_CMD</span> start <span class="k">${</span><span class="nv">ARTIFACT_NAME</span><span class="k">}</span>
</code></pre></div></div> <ul> <li>Most <code class="language-plaintext highlighter-rouge">cictl</code> commands require the <code class="language-plaintext highlighter-rouge">--server, -s</code> flag to specify the location of the fuzzing server, so be sure to include it</li> <li>The project name can be obtained by running <code class="language-plaintext highlighter-rouge">cictl -s &lt;fuzzing server&gt; list projects</code>. The project name should be of the form <code class="language-plaintext highlighter-rouge">projects/my_project-391A177B</code>.</li> </ul> <h2 id="ci-fuzz-cli-remote-run"> <a href="#ci-fuzz-cli-remote-run" class="anchor-heading" aria-labelledby="ci-fuzz-cli-remote-run"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CI Fuzz CLI Remote Run </h2> <p>You can use the CI Fuzz CLI remote-run command (<code class="language-plaintext highlighter-rouge">cifuzz remote-run</code>) to bundle, submit, and start your fuzz tests with one command. This method does not require <code class="language-plaintext highlighter-rouge">cictl</code>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cifuzz remote-run <span class="nt">--server</span> &lt;server address&gt;
</code></pre></div></div> <ul> <li>You can authenticate to the server automatically by passing the environment variable <code class="language-plaintext highlighter-rouge">CIFUZZ_API_TOKEN</code> as part of your command (e.g. <code class="language-plaintext highlighter-rouge">CIFUZZ_API_TOKEN=&lt;token&gt; cifuzz remote-run --server "https://cifuzz.server.com"</code>).</li> <li>You can specify the name of one or more fuzz tests. If you or don’t specify any, then <code class="language-plaintext highlighter-rouge">remote-run</code> will bundle and run all the fuzz tests for a project.</li> <li>You can specify various arguments that will tell CI Fuzz how to run your fuzz tests. See <a href="/cli-remote-run">this page</a> for additional details.</li> <li>You can pass an existing bundle by simply specifying the <code class="language-plaintext highlighter-rouge">--bundle</code> flag and the path to the bundle. When passing an existing bundle, CI Fuzz will ignore any runtime flags passed as part of the <code class="language-plaintext highlighter-rouge">remote-run</code> command (e.g. <code class="language-plaintext highlighter-rouge">--timeout</code>, <code class="language-plaintext highlighter-rouge">--docker-image</code>).</li> </ul> <h2 id="running-fuzz-tests-with-cicd"> <a href="#running-fuzz-tests-with-cicd" class="anchor-heading" aria-labelledby="running-fuzz-tests-with-cicd"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Fuzz Tests with CI/CD </h2> <p>To create a CI/CD pipeline, you will need to install both <a href="/cli-installation">CI Fuzz CLI</a> and the <code class="language-plaintext highlighter-rouge">cictl</code> command line tool. CI Fuzz must be reachable from the CI/CD server.</p> <p>The general workflow is</p> <ol> <li>Build/bundle the artifacts that will run on the server</li> <li>Upload the artifacts to the server and run them</li> <li>Monitor the results</li> </ol> <p>Here is a script you can use to help write and test your CI/CD pipeline.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#! /usr/bin/bash</span>

<span class="c"># how long to monitor the fuzz test</span>
<span class="nv">TIMEOUT</span><span class="o">=</span>300
<span class="c"># this should match wherever CI Fuzz is currently reachable</span>
<span class="nv">FUZZING_SERVER</span><span class="o">=</span><span class="s2">"127.0.0.1:8080"</span>
<span class="c"># address of the web application</span>
<span class="nv">WEB_APP_ADDRESS</span><span class="o">=</span><span class="s2">"http://127.0.0.1:8080"</span>
<span class="c"># project name of the form: projects/c-cpp-demo-0b5fbe28</span>
<span class="c"># this can be obtained by using cictl -s &lt;server&gt; list projects</span>
<span class="nv">PROJECT</span><span class="o">=</span>&lt;project name&gt;
<span class="c"># access token generated in the CI Fuzz web app</span>
<span class="nv">CI_FUZZ_API_TOKEN</span><span class="o">=</span>
<span class="c"># local directory where the project is located</span>
<span class="nv">LOCAL_REPO</span><span class="o">=</span>

<span class="c"># create bundle from local repo</span>
<span class="c"># you can specify additional bundle options at the command line, or include them in cifuzz.yaml</span>
<span class="nb">cd</span> <span class="nv">$LOCAL_REPO</span>
cifuzz bundle 

<span class="nv">CICTL_CMD</span><span class="o">=</span><span class="s2">"cictl -s </span><span class="nv">$FUZZING_SERVER</span><span class="s2">"</span>
<span class="c"># login to the CI Fuzz server</span>
<span class="nb">echo</span> <span class="nv">$CI_FUZZ_API_TOKEN</span> | <span class="nv">$CICTL_CMD</span> login
<span class="c"># upload the bundle to the CI Fuzz server</span>
<span class="nv">ARTIFACT_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nv">$CICTL_CMD</span> import artifact fuzz_tests.tar.gz <span class="nt">--project-name</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span><span class="si">)</span>
<span class="c"># start the fuzz tests in the bundle </span>
<span class="nv">CAMPAIGN_RUN</span><span class="o">=</span><span class="si">$(</span><span class="nv">$CICTL_CMD</span> start <span class="nt">--application-base-url</span> <span class="s2">"</span><span class="k">${</span><span class="nv">WEB_APP_ADDRESS</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"</span><span class="k">${</span><span class="nv">ARTIFACT_NAME</span><span class="k">}</span><span class="s2">"</span><span class="si">)</span>
<span class="c"># monitor the output from the campaign_run</span>
<span class="nv">$CICTL_CMD</span> monitor_campaign_run <span class="nt">--dashboard_address</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">WEB_APP_ADDRESS</span><span class="k">}</span><span class="s2">"</span> <span class="nt">--keep_running</span> <span class="nt">--duration</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">TIMEOUT</span><span class="k">}</span><span class="s2">"</span> <span class="k">${</span><span class="nv">CAMPAIGN_RUN</span><span class="k">}</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
